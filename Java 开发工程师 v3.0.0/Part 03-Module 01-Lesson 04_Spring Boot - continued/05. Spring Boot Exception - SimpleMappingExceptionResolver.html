<!-- udacity2.0 -->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Spring Boot Exception - SimpleMappingExceptionResolver</title>
  <link rel="stylesheet" href="../assets/css/bootstrap.min.css">
  <link rel="stylesheet" href="../assets/css/plyr.css">
  <link rel="stylesheet" href="../assets/css/katex.min.css">
  <link rel="stylesheet" href="../assets/css/jquery.mCustomScrollbar.min.css">
  <link rel="stylesheet" href="../assets/css/styles.css">
  <link rel="shortcut icon" type="image/png" href="../assets/img/udacimak.png" />
</head>

<body>
  <div class="wrapper">
    <nav id="sidebar">
  <div class="sidebar-header">
    <h3>Spring Boot - continued</h3>
  </div>

  <ul class="sidebar-list list-unstyled CTAs">
    <li>
      <a href="../index.html" class="article">Back to Home</a>
    </li>
  </ul>

  <ul class="sidebar-list list-unstyled components">
    <li class="">
      <a href="01. Spring Boot Exception Handling.html">01. Spring Boot Exception Handling</a>
    </li>
    <li class="">
      <a href="02. Spring Boot Exception - Custom Error Page.html">02. Spring Boot Exception - Custom Error Page</a>
    </li>
    <li class="">
      <a href="03. Spring Boot Exception - Exception Handlers.html">03. Spring Boot Exception - Exception Handlers</a>
    </li>
    <li class="">
      <a href="04. Spring Boot Exception- @ControllerAdvise + @ExceptionHandler.html">04. Spring Boot Exception- @ControllerAdvise + @ExceptionHandler</a>
    </li>
    <li class="">
      <a href="05. Spring Boot Exception - SimpleMappingExceptionResolver.html">05. Spring Boot Exception - SimpleMappingExceptionResolver</a>
    </li>
    <li class="">
      <a href="06. Spring Boot Exception Handling - Summary.html">06. Spring Boot Exception Handling - Summary</a>
    </li>
    <li class="">
      <a href="07. WebSocket and STOMP.html">07. WebSocket and STOMP</a>
    </li>
    <li class="">
      <a href="08. WebSocket - Example Project.html">08. WebSocket - Example Project</a>
    </li>
    <li class="">
      <a href="09. Package Spring Boot Application.html">09. Package Spring Boot Application</a>
    </li>
    <li class="">
      <a href="10. Course Recap.html">10. Course Recap</a>
    </li>
  </ul>

  <ul class="sidebar-list list-unstyled CTAs">
    <li>
      <a href="../index.html" class="article">Back to Home</a>
    </li>
  </ul>
</nav>

    <div id="content">
      <header class="container-fluild header">
        <div class="container">
          <div class="row">
            <div class="col-12">
              <div class="align-items-middle">
                <button type="button" id="sidebarCollapse" class="btn btn-toggle-sidebar">
                  <div></div>
                  <div></div>
                  <div></div>
                </button>

                <h1 style="display: inline-block">05. Spring Boot Exception - SimpleMappingExceptionResolver</h1>
              </div>
            </div>
          </div>
        </div>
      </header>

      <main class="container">
        <div class="row">
          <div class="col-12">
            <div class="ud-atom">
  <h3><p>035ND C01 L04 A06 SIMPLE MAPPING RESOLVER</p></h3>
  <video controls>
  <source src="05. 035ND C01 L04 A06 SIMPLE MAPPING RESOLVER-UghPypy54vA.mp4" type="video/mp4">

  <track default="true" kind="subtitles" srclang="en" src="05. 035ND C01 L04 A06 SIMPLE MAPPING RESOLVER-UghPypy54vA.en.vtt" label="en">
</video>


</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <h2 id="example-instructions">Example Instructions</h2>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <ol>
<li><p>Let’s make our GloablExceptionHandler as bak first, so that we can keep our code. Rename <code>GloablExceptionHandler.java</code> to <code>GlobalExceptionHandler.java.bak</code>. <code>.bak</code> extension means that the file is a backup file and that we can retrieve the content of that file. Therefore, it's a good practice to rename a file so it ends with .bak if you want to be able to retrieve its original content. </p></li>
<li><p>Create a class under exceptions directory and name it "MySimpleMappingExceptionResolver". Your code should look like the one below: </p></li>
</ol>
<pre><code>@Configuration
public class MySimpleMappingExceptionResolver {
   @Bean
   public SimpleMappingExceptionResolver getSimpleMappingExceptionResolver() {
       SimpleMappingExceptionResolver resolver = new SimpleMappingExceptionResolver();
       Properties mapping = new Properties();
       mapping.put("java.lang.ArithmeticException", "mathError"); //key=exception full name. value, view name
       mapping.put("java.lang.NullPointerException", "nullPointerError");
       resolver.setExceptionMappings(mapping);
       return resolver;
   }
}</code></pre>
<ol start="3">
<li>If you refresh the browser page, you can see error is handled.</li>
</ol>
<p>In the code above, we defined an error handling method that returns SimpleMappingExceptionResolver object. We used SimpleMappingExceptionResolver to map different exceptions to different views. In order for SimpleMappingExceptionResolver to do that, it needs to take an argument of Properties type that defines the mapping between the exceptions and the views. Properties is simply a subclass of HashTable and it allows us to associate values of type String with keys (which are also strings). We put our mappings into the Properties object, where we map each exception to the name of the view that should be displayed when it occurs. For example, if an ArithmeticException will occur, mathError.html will be viewed. Eventually, we passed the Properties object to the SimpleMappingExceptionResolver object and we returned the resolver object. </p>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <h2 id="demo">Demo</h2>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>035ND C01 L04 A07 HANDLER EXCEPTION RESOLVER EXAMPLE</p></h3>
  <video controls>
  <source src="05. 035ND C01 L04 A07 HANDLER EXCEPTION RESOLVER EXAMPLE-mFrBqrzNIVk.mp4" type="video/mp4">

  <track default="true" kind="subtitles" srclang="en" src="05. 035ND C01 L04 A07 HANDLER EXCEPTION RESOLVER EXAMPLE-mFrBqrzNIVk.en.vtt" label="en">
</video>


</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <ol>
<li><p>Let’s rename MySimpleMappingExceptionResolver.java to MySimpleMappingExceptionResolver.java.bak</p></li>
<li><p>Create MyHandlerExceptionResolver class under exceptions directory. Your code should look like the one below: </p></li>
</ol>
<pre><code>public class MyHandlerExceptionResolver implements HandlerExceptionResolver{
   @Override
   public ModelAndView resolveException(HttpServletRequest httpServletRequest,
                                        HttpServletResponse httpServletResponse, @Nullable Object o, Exception e) {
       ModelAndView mv = new ModelAndView();
       if (e instanceof ArithmeticException) {
           mv.setViewName("mathError");
       }
       if (e instanceof NullPointerException) {
           mv.setViewName("nullPointerError");
       }
       mv.addObject("exception", e.toString());
       return mv;
   }
}</code></pre>
<ol start="3">
<li>If you refresh the browser page, you'll find that the exception is handled</li>
</ol>
<p>In the code above, we created a class to handle exceptions. This class implements the interface <code>HandlerExceptionResolver</code> which allows us to handle exceptions. In order for the class to implement this interface, it needs to implement its method <code>resolveException</code>.  In the code inside this method, we created a ModelAndView object. Then, we checked the exception type (note that the exception was received as an argument of <code>resolveException</code> method (its name is "e")) and we added the corresponding view to the ModelAndView object accordingly. Eventually, we return the ModelAndView object. </p>
</div>

</div>
<div class="divider"></div>
          </div>

          <div class="col-12">
            <p class="text-right">
              <a href="06. Spring Boot Exception Handling - Summary.html" class="btn btn-outline-primary mt-4" role="button">Next Concept</a>
            </p>
          </div>
        </div>
      </main>

      <footer class="footer">
        <div class="container">
          <div class="row">
            <div class="col-12">
              <p class="text-center">
                <a href="https://us-udacity.github.io/" target="_blank">【udacity2.0 】If you need more courses, please add wechat：udacity6</a>
              </p>
            </div>
          </div>
        </div>
      </footer>
    </div>
  </div>


  <script src="../assets/js/jquery-3.3.1.min.js"></script>
  <script src="../assets/js/plyr.polyfilled.min.js"></script>
  <script src="../assets/js/bootstrap.min.js"></script>
  <script src="../assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
  <script src="../assets/js/katex.min.js"></script>
  <script>
    // Initialize Plyr video players
    const players = Array.from(document.querySelectorAll('video')).map(p => new Plyr(p));

    // render math equations
    let elMath = document.getElementsByClassName('mathquill');
    for (let i = 0, len = elMath.length; i < len; i += 1) {
      const el = elMath[i];

      katex.render(el.textContent, el, {
        throwOnError: false
      });
    }

    // this hack will make sure Bootstrap tabs work when using Handlebars
    if ($('#question-tabs').length && $('#user-answer-tabs').length) {
      $("#question-tabs a.nav-link").on('click', function () {
        $("#question-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
      $("#user-answer-tabs a.nav-link").on('click', function () {
        $("#user-answer-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
    } else {
      $("a.nav-link").on('click', function () {
        $(".tab-pane").hide();
        $($(this).attr("href")).show();
      });
    }

    // side bar events
    $(document).ready(function () {
      $("#sidebar").mCustomScrollbar({
        theme: "minimal"
      });

      $('#sidebarCollapse').on('click', function () {
        $('#sidebar, #content').toggleClass('active');
        $('.collapse.in').toggleClass('in');
        $('a[aria-expanded=true]').attr('aria-expanded', 'false');
      });

      // scroll to first video on page loading
      if ($('video').length) {
        $('html,body').animate({ scrollTop: $('div.plyr').prev().offset().top});
      }

      // auto play first video: this may not work with chrome/safari due to autoplay policy
      if (players && players.length > 0) {
        players[0].play();
      }

      // scroll sidebar to current concept
      const currentInSideBar = $( "ul.sidebar-list.components li a:contains('05. Spring Boot Exception - SimpleMappingExceptionResolver')" )
      currentInSideBar.css( "text-decoration", "underline" );
      $("#sidebar").mCustomScrollbar('scrollTo', currentInSideBar);
    });
  </script>
</body>

</html>
