<!-- udacity2.0 -->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Testing - Mockito</title>
  <link rel="stylesheet" href="../assets/css/bootstrap.min.css">
  <link rel="stylesheet" href="../assets/css/plyr.css">
  <link rel="stylesheet" href="../assets/css/katex.min.css">
  <link rel="stylesheet" href="../assets/css/jquery.mCustomScrollbar.min.css">
  <link rel="stylesheet" href="../assets/css/styles.css">
  <link rel="shortcut icon" type="image/png" href="../assets/img/udacimak.png" />
</head>

<body>
  <div class="wrapper">
    <nav id="sidebar">
  <div class="sidebar-header">
    <h3>Testing and Logging</h3>
  </div>

  <ul class="sidebar-list list-unstyled CTAs">
    <li>
      <a href="../index.html" class="article">Back to Home</a>
    </li>
  </ul>

  <ul class="sidebar-list list-unstyled components">
    <li class="">
      <a href="01. Lesson Overview.html">01. Lesson Overview</a>
    </li>
    <li class="">
      <a href="02. Testing - Types.html">02. Testing - Types</a>
    </li>
    <li class="">
      <a href="03. Testing - JUnit Practice - I.html">03. Testing - JUnit Practice - I</a>
    </li>
    <li class="">
      <a href="04. Testing - JUnit Practice - II.html">04. Testing - JUnit Practice - II</a>
    </li>
    <li class="">
      <a href="05. Testing - Code Coverage.html">05. Testing - Code Coverage</a>
    </li>
    <li class="">
      <a href="06. Testing - Mockito.html">06. Testing - Mockito</a>
    </li>
    <li class="">
      <a href="07. Testing - Best Practices.html">07. Testing - Best Practices</a>
    </li>
    <li class="">
      <a href="08. Logging - SLF4J and Log4J.html">08. Logging - SLF4J and Log4J</a>
    </li>
    <li class="">
      <a href="09. Logging - Log Levels.html">09. Logging - Log Levels</a>
    </li>
    <li class="">
      <a href="10. Logging - Log4J Example.html">10. Logging - Log4J Example</a>
    </li>
  </ul>

  <ul class="sidebar-list list-unstyled CTAs">
    <li>
      <a href="../index.html" class="article">Back to Home</a>
    </li>
  </ul>
</nav>

    <div id="content">
      <header class="container-fluild header">
        <div class="container">
          <div class="row">
            <div class="col-12">
              <div class="align-items-middle">
                <button type="button" id="sidebarCollapse" class="btn btn-toggle-sidebar">
                  <div></div>
                  <div></div>
                  <div></div>
                </button>

                <h1 style="display: inline-block">06. Testing - Mockito</h1>
              </div>
            </div>
          </div>
        </div>
      </header>

      <main class="container">
        <div class="row">
          <div class="col-12">
            <div class="ud-atom">
  <h3><p>Mocks</p></h3>
  <div>
  <h2 id="mocks">Mocks</h2>
<p>Sometimes it is impossible or undesirable to directly work with a particular object, such as if that object is unavailable or impractical to work with. But we may still want to test our code to see how it works with that object. In such cases, we can create a <strong>mock object</strong> (or <strong>mock</strong>) that simulates the real object in specific, controlled ways—and then test our code using this simulated object. In this section, we'll explore how to create such mocks using a framework called <strong>Mockito</strong>.</p>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>ND035 C04 L02 A11 Mockito</p></h3>
  <video controls>
  <source src="06. ND035 C04 L02 A11 Mockito-14Okwxla5l8.mp4" type="video/mp4">

  <track default="true" kind="subtitles" srclang="en" src="06. ND035 C04 L02 A11 Mockito-14Okwxla5l8.en.vtt" label="en">
</video>


</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>Mocking Quiz</p></h3>
  <div>
  <form>
    <fieldset>
      <legend><p>True or False: In unit testing, a <strong>Mock</strong> object (or a method) substitutes an actual instance (or an implementation). </p></legend>
    </fieldset>

      <div>
        <input type="radio" value="rbk1" name="1115569" id="rbk1">
        <label for="rbk1"><p>True</p></label>
      </div>
      <div>
        <input type="radio" value="rbk2" name="1115569" id="rbk2">
        <label for="rbk2"><p>False</p></label>
      </div>
  </form>

  <details>
    <summary><strong>SOLUTION:</strong></summary>
    True
  </details>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>Mockito</p></h3>
  <div>
  <h2 id="mockito">Mockito</h2>
<p>Let's look at how we can create mocks using <a href="https://site.mockito.org/" target="_blank"><strong>Mockito</strong></a>, mocking framework for unit tests in Java.</p>
<p>In this next video, we'll walk through building some mocks for the eCommerce application. You likely cloned the repository for this earlier in the course, but if you need it, you can find it <a href="https://github.com/udacity/JDND/tree/master/projects/P04-eCommerce%20Application/starter_code" target="_blank">here</a>.</p>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>Untitled</p></h3>
  <div>
  <h2 id="writing-testutils">Writing <code>TestUtils</code></h2>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>ND035 C04 L02 A12.1 Mockito Example</p></h3>
  <video controls>
  <source src="06. ND035 C04 L02 A12.1 Mockito Example-UPFUQOdm8zY.mp4" type="video/mp4">

  <track default="true" kind="subtitles" srclang="en" src="06. ND035 C04 L02 A12.1 Mockito Example-UPFUQOdm8zY.en.vtt" label="en">
</video>


</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>Untitled</p></h3>
  <div>
  <h3 id="few-important-methods-and-annotations-provided-by-mockito-are">Few important methods and annotations provided by Mockito are:</h3>
<ul>
<li><p><a href="http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#mock-java.lang.Class-" rel="noopener noreferrer" target="_blank"><code>mock()</code></a>/<a href="http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mock.html" rel="noopener noreferrer" target="_blank"><code>@Mock</code></a> - To create mock object. Here, <code>mock()</code> is an overloaded static method which accepts <code>Class&lt;T&gt; classToMock</code> as an argument and correspondingly returns a mock instance. </p></li>
<li><p><a href="http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#when-T-" rel="noopener noreferrer" target="_blank"><code>when()</code></a>/<a href="http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/BDDMockito.html#given-T-" rel="noopener noreferrer" target="_blank"><code>given()</code></a> - To specify the behaviour of mock object. <code>when()</code> method takes a particular method <strong>X</strong> as argument and set the expected (mocked) return value as <strong>Y</strong>. Following are the few examples:  </p></li>
</ul>
<pre><code>when(mock.someMethod()).thenReturn(200); 
//parameterized methods as argument
when(mock.someMethod(anyString())).thenReturn(200); 
//throw an exception 
when(mock.someMethod("some argument")).thenThrow(new RuntimeException());</code></pre>
<ul>
<li><a href="http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#spy-T-" rel="noopener noreferrer" target="_blank"><code>spy()</code></a>/ <a href="http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Spy.html" rel="noopener noreferrer" target="_blank"><code>@Spy</code></a> - It is used for partial mocking. It means that the real methods are invoked but still can be verified and stubbed.</li>
<li>There are few more methods and annotations available, such as <a href="http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/InjectMocks.html" rel="noopener noreferrer" target="_blank"><code>@InjectMocks</code></a>, <a href="http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#verify-T-" rel="noopener noreferrer" target="_blank"><code>verify()</code></a></li>
</ul>
<p>Note that if a project contains private methods to test, then we can't use Mockito as it does not mock private methods. Mockito assumes that private methods don't exist from the viewpoint of testing. </p>
<p>There are few other mocking frameworks available for Java, such as <a href="http://www.jmock.org/" rel="noopener noreferrer" target="_blank">JMock</a>, <a href="http://easymock.org/" rel="noopener noreferrer" target="_blank">EasyMock</a>, and <a href="https://powermock.github.io/" rel="noopener noreferrer" target="_blank">Powermock</a>. It is a matter of choice of the developer based on preferences such as Powermock can even mock private methods. </p>
<h2 id="writing-the-usercontroller-class">Writing the <code>UserController</code> class</h2>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>ND035 C04 L02 A12.2 Mockito Example V3</p></h3>
  <video controls>
  <source src="06. ND035 C04 L02 A12.2 Mockito Example V3-QPDYREKOwR4.mp4" type="video/mp4">

  <track default="true" kind="subtitles" srclang="en" src="06. ND035 C04 L02 A12.2 Mockito Example V3-QPDYREKOwR4.en.vtt" label="en">
</video>


</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>Mockito Example</p></h3>
  <div>
  <div>
    <h4>Task Description:</h4>
    <p>Before moving on, make sure that you've done the following in the eCommerce application:</p>
  </div>

  <form>
    <fieldset>
      <legend>Task List:</legend>

      <div>
        <input type="checkbox" id="32e36950-e9a3-47fc-892a-22fc6dbf9b4e--0">
        <label for="32e36950-e9a3-47fc-892a-22fc6dbf9b4e--0"><p>Add <code>TestUtils</code></p></label>
      </div>
      <div>
        <input type="checkbox" id="32e36950-e9a3-47fc-892a-22fc6dbf9b4e--1">
        <label for="32e36950-e9a3-47fc-892a-22fc6dbf9b4e--1"><p>Add <code>UserController</code></p></label>
      </div>
      <div>
        <input type="checkbox" id="32e36950-e9a3-47fc-892a-22fc6dbf9b4e--2">
        <label for="32e36950-e9a3-47fc-892a-22fc6dbf9b4e--2"><p>Increased the test coverage percent (remember you're shooting for 80% here!)</p></label>
      </div>
    </fieldset>
  </form>

  <div>
    <h4>Task Feedback:</h4>


    <p>Again, having done these things now means you'll be in great shape when you get to the final project!</p>
  </div>
</div>


</div>
<div class="divider"></div>
          </div>

          <div class="col-12">
            <p class="text-right">
              <a href="07. Testing - Best Practices.html" class="btn btn-outline-primary mt-4" role="button">Next Concept</a>
            </p>
          </div>
        </div>
      </main>

      <footer class="footer">
        <div class="container">
          <div class="row">
            <div class="col-12">
              <p class="text-center">
                <a href="https://us-udacity.github.io/" target="_blank">【udacity2.0 】If you need more courses, please add wechat：udacity6</a>
              </p>
            </div>
          </div>
        </div>
      </footer>
    </div>
  </div>


  <script src="../assets/js/jquery-3.3.1.min.js"></script>
  <script src="../assets/js/plyr.polyfilled.min.js"></script>
  <script src="../assets/js/bootstrap.min.js"></script>
  <script src="../assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
  <script src="../assets/js/katex.min.js"></script>
  <script>
    // Initialize Plyr video players
    const players = Array.from(document.querySelectorAll('video')).map(p => new Plyr(p));

    // render math equations
    let elMath = document.getElementsByClassName('mathquill');
    for (let i = 0, len = elMath.length; i < len; i += 1) {
      const el = elMath[i];

      katex.render(el.textContent, el, {
        throwOnError: false
      });
    }

    // this hack will make sure Bootstrap tabs work when using Handlebars
    if ($('#question-tabs').length && $('#user-answer-tabs').length) {
      $("#question-tabs a.nav-link").on('click', function () {
        $("#question-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
      $("#user-answer-tabs a.nav-link").on('click', function () {
        $("#user-answer-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
    } else {
      $("a.nav-link").on('click', function () {
        $(".tab-pane").hide();
        $($(this).attr("href")).show();
      });
    }

    // side bar events
    $(document).ready(function () {
      $("#sidebar").mCustomScrollbar({
        theme: "minimal"
      });

      $('#sidebarCollapse').on('click', function () {
        $('#sidebar, #content').toggleClass('active');
        $('.collapse.in').toggleClass('in');
        $('a[aria-expanded=true]').attr('aria-expanded', 'false');
      });

      // scroll to first video on page loading
      if ($('video').length) {
        $('html,body').animate({ scrollTop: $('div.plyr').prev().offset().top});
      }

      // auto play first video: this may not work with chrome/safari due to autoplay policy
      if (players && players.length > 0) {
        players[0].play();
      }

      // scroll sidebar to current concept
      const currentInSideBar = $( "ul.sidebar-list.components li a:contains('06. Testing - Mockito')" )
      currentInSideBar.css( "text-decoration", "underline" );
      $("#sidebar").mCustomScrollbar('scrollTo', currentInSideBar);
    });
  </script>
</body>

</html>
